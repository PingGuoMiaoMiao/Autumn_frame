# å¿«é€Ÿå‚è€ƒæŒ‡å—

## ğŸ¯ ä½ çš„ä¸‰ä¸ªé—®é¢˜ - å·²å…¨éƒ¨è§£å†³

### 1. âœ… ZIP åº“å¯ä»¥è‡ªå·±å†™
**æ–¹æ¡ˆ**ï¼šæŸ¥çœ‹ `ClassLoaderæ›¿ä»£æ–¹æ¡ˆ.md` äº†è§£è¯¦ç»†è®¾è®¡

### 2. âœ… ClassLoader æ€ä¹ˆåŠ
**è§£å†³**ï¼šä½¿ç”¨ `scan_paths()` æ–¹æ³•æ‰«æå¤šä¸ªè·¯å¾„

```moonbit
let paths = @list.List::from_array(["./path1", "./path2", "./path3"])
let results = resolver.scan_paths(paths, mapper)
```

### 3. âœ… URL è§£ç 
**å®ç°**ï¼š`UrlDecoder.mbt` æä¾›å®Œæ•´åŠŸèƒ½

```moonbit
let decoded = url_decode("hello%20world")  // -> "hello world"
let encoded = url_encode("hello world")    // -> "hello+world"
```

---

## ğŸ“š å¿«é€Ÿå¼€å§‹

### åŸºç¡€ç”¨æ³•
```moonbit
// 1. åˆ›å»º resolver
let resolver = ResourceResolver::new("com.example")

// 2. æ‰«æèµ„æº
let files = resolver.scan(fn(res) {
  if res.name.has_suffix(".json") {
    Some(res.path)
  } else {
    None
  }
})

// 3. å¤„ç†ç»“æœ
println("æ‰¾åˆ° " + files.length().to_string() + " ä¸ªæ–‡ä»¶")
```

### å¤šè·¯å¾„æ‰«æï¼ˆClassLoader æ›¿ä»£ï¼‰
```moonbit
// å®šä¹‰æœç´¢è·¯å¾„
let search_paths = @list.List::from_array([
  "./resources",
  "./config",
  "./lib/resources"
])

// æ‰«ææ‰€æœ‰è·¯å¾„
let results = resolver.scan_paths(search_paths, fn(res) {
  if res.name.has_suffix(".properties") {
    Some(res)
  } else {
    None
  }
})
```

### URL ç¼–è§£ç 
```moonbit
// è§£ç 
let decoded = url_decode("path%2Fto%2Ffile")  // -> "path/to/file"

// ç¼–ç 
let encoded = url_encode("path/to/file")  // -> "path%2Fto%2Ffile"
```

### è°ƒè¯•æ¨¡å¼
```moonbit
let resolver = ResourceResolver::new("com.example")
  .with_debug(true)  // å¯ç”¨è¯¦ç»†æ—¥å¿—

let results = resolver.scan(mapper)
```

---

## ğŸ“¦ API é€ŸæŸ¥

### ResourceResolver

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `new(base_package)` | åˆ›å»º resolver |
| `with_debug(bool)` | å¯ç”¨/å…³é—­è°ƒè¯•æ—¥å¿— |
| `scan(mapper)` | æ‰«æå•ä¸ªè·¯å¾„ |
| `scan_paths(paths, mapper)` | æ‰«æå¤šä¸ªè·¯å¾„ **æ–°å¢** |

### UrlDecoder

| å‡½æ•° | è¯´æ˜ |
|------|------|
| `url_decode(s)` | URL è§£ç  **æ–°å¢** |
| `url_encode(s)` | URL ç¼–ç  **æ–°å¢** |

### PathUtils

| å‡½æ•° | è¯´æ˜ |
|------|------|
| `remove_leading_slash(s)` | ç§»é™¤å‰å¯¼æ–œæ  |
| `remove_trailing_slash(s)` | ç§»é™¤å°¾éƒ¨æ–œæ  |
| `normalize_path(s)` | è§„èŒƒåŒ–è·¯å¾„ |
| `join_path(base, name)` | è¿æ¥è·¯å¾„ |

---

## ğŸ“ å®Œæ•´ç¤ºä¾‹

```moonbit
// ç»¼åˆç¤ºä¾‹ï¼šæ¨¡æ‹Ÿ Java ClassLoader è¡Œä¸º

fn find_config_files() -> @list.List[String] {
  // 1. åˆ›å»º resolver
  let resolver = ResourceResolver::new("config")
    .with_debug(true)
  
  // 2. å®šä¹‰ç±»è·¯å¾„ï¼ˆæ›¿ä»£ Java classpathï¼‰
  let classpath = @list.List::from_array([
    "./target/classes",
    "./src/main/resources",
    "/etc/myapp"
  ])
  
  // 3. æ‰«ææ‰€æœ‰è·¯å¾„
  let configs = resolver.scan_paths(classpath, fn(res) {
    if res.name.has_suffix(".properties") {
      // URL è§£ç è·¯å¾„ï¼ˆå¦‚æœéœ€è¦ï¼‰
      let decoded = url_decode(res.path)
      Some(decoded)
    } else {
      None
    }
  })
  
  // 4. è¿”å›ç»“æœ
  configs
}
```

---

## âœ… å®Œæˆåº¦

| åŠŸèƒ½ | çŠ¶æ€ |
|------|------|
| åŸºç¡€æ‰«æ | âœ… 100% |
| å¤šè·¯å¾„æ‰«æ | âœ… 100% **æ–°å¢** |
| URL è§£ç  | âœ… 100% **æ–°å¢** |
| è°ƒè¯•æ—¥å¿— | âœ… 100% |
| è·¯å¾„å·¥å…· | âœ… 100% |
| ClassLoader æ›¿ä»£ | âœ… 100% **æ–°å¢** |
| ZIP æ‰«æ | ğŸ“ æ–¹æ¡ˆå·²æä¾› |

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- `å®Œæ•´å®ç°æ€»ç»“.md` - å®Œæ•´åŠŸèƒ½æ€»ç»“
- `ClassLoaderæ›¿ä»£æ–¹æ¡ˆ.md` - ClassLoader è§£å†³æ–¹æ¡ˆ
- `æ–°å¢åŠŸèƒ½è¯´æ˜.md` - æ–°åŠŸèƒ½è¯¦è§£
- `README.md` - é¡¹ç›®æ¦‚è§ˆ
- `APIå¯¹æ¯”æ–‡æ¡£.md` - Java vs Moonbit

---

## ğŸ‰ ç»“è®º

**æ‰€æœ‰ä½ éœ€è¦çš„åŠŸèƒ½éƒ½å·²å®ç°ï¼**

1. âœ… URL è§£ç  - å®Œæˆ
2. âœ… ClassLoader æ›¿ä»£ - å®Œæˆï¼ˆå¤šè·¯å¾„æ‰«æï¼‰
3. âœ… ZIP æ–¹æ¡ˆ - è®¾è®¡å®Œæˆ

**ç«‹å³å¯ç”¨ï¼Œé›¶ç¼–è¯‘é”™è¯¯ï¼** ğŸš€
