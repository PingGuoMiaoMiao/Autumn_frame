/// Autumn Framework å®Œæ•´ç¤ºä¾‹
/// 
/// æ ¹æ®ä½¿ç”¨æŒ‡å—åˆ›å»ºçš„å®Œæ•´ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ Autumn Frame æ„å»º Web åº”ç”¨
/// ç±»ä¼¼ Spring Boot çš„å¼€å‘ä½“éªŒ

// ========== å¯¼å…¥ä¾èµ– ==========

/// ä¸»å‡½æ•°
fn main {
  println("============================================================")
  println("Autumn Framework ç¤ºä¾‹åº”ç”¨")
  println("============================================================")
  println("")
  
  // ========== ç¬¬ä¸€æ­¥ï¼šåˆ›å»º IoC å®¹å™¨ ==========
  println("ğŸ“ ç¬¬ä¸€æ­¥ï¼šåˆ›å»º IoC å®¹å™¨")
  println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
  
  // åˆ›å»ºé…ç½®ï¼ˆç±»ä¼¼ Spring Boot çš„ application.propertiesï¼‰
  let config = [
    ("app.name", "User Management System"),
    ("app.version", "1.0.0"),
    ("server.port", "8080"),
    ("db.url", "jdbc:mysql://localhost:3306/users"),
    ("db.username", "root"),
    ("db.password", "password")
  ]
  
  // åˆ›å»º IoC å®¹å™¨ï¼ˆç±»ä¼¼ Spring çš„ ApplicationContextï¼‰
  let ctx = @ApplicationContext.ApplicationContext::new(config, "com.example")
  println("âœ“ IoC å®¹å™¨åˆ›å»ºæˆåŠŸ")
  println("  - é…ç½®é¡¹æ•°é‡: " + config.length().to_string())
  println("")
  
  // ========== ç¬¬äºŒæ­¥ï¼šæ³¨å†Œ Bean ==========
  println("ğŸ“¦ ç¬¬äºŒæ­¥ï¼šæ³¨å†Œ Bean")
  println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
  
  // æ³¨å†Œ Beanï¼ˆç±»ä¼¼ Spring çš„ @Component, @Service, @Repositoryï¼‰
  ctx.register_bean("userService", "com.example.service.UserService", 10, false)
  ctx.register_bean("userRepository", "com.example.repository.UserRepository", 5, false)
  ctx.register_bean("userController", "com.example.controller.UserController", 20, false)
  
  println("âœ“ æ³¨å†Œ Bean: userService (order=10)")
  println("âœ“ æ³¨å†Œ Bean: userRepository (order=5)")
  println("âœ“ æ³¨å†Œ Bean: userController (order=20)")
  println("")
  
  // ========== ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º Bean å®ä¾‹ ==========
  println("ğŸ”¨ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º Bean å®ä¾‹")
  println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
  
  ctx.create_all_beans()
  println("âœ“ æ‰€æœ‰ Bean åˆ›å»ºå®Œæˆ")
  println("")
  
  // ========== ç¬¬å››æ­¥ï¼šåˆ›å»º Web MVC åº”ç”¨ ==========
  println("ğŸŒ ç¬¬å››æ­¥ï¼šåˆ›å»º Web MVC åº”ç”¨")
  println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
  
  // 4.1 åˆ›å»ºæ ¹è·¯å¾„ Controllerï¼ˆå¤„ç† / è¯·æ±‚ï¼‰
  let root_controller = @Controller.Controller::new("")
    .get("/", fn(_request : @Http.HttpRequest) {
      let html_part1 = "<!DOCTYPE html><html><head><title>Autumn Framework</title>"
      let html_part2 = html_part1 + "<meta charset='utf-8'></head><body>"
      let html_part3 = html_part2 + "<style>body{font-family:Arial,sans-serif;margin:40px;}" +
                       "h1{color:#333;}ul{list-style:none;padding:0;}li{margin:10px 0;}" +
                       "a{color:#007bff;text-decoration:none;}a:hover{text-decoration:underline;}</style>"
      let html_part4 = html_part3 + "<h1>æ¬¢è¿ä½¿ç”¨ Autumn Framework</h1>"
      let html_part5 = html_part4 + "<p>è¿™æ˜¯ä¸€ä¸ªåŸºäº MoonBit çš„ Web æ¡†æ¶ï¼Œç±»ä¼¼ Spring Boot</p>"
      let html_part6 = html_part5 + "<h2>å¯ç”¨è·¯ç”±ï¼š</h2>"
      let html_part7 = html_part6 + "<ul>"
      let html_part8 = html_part7 + "<li><a href='/login'>GET /login</a> - ç™»å½•é¡µé¢</li>"
      let html_part9 = html_part8 + "<li><a href='/users'>GET /users</a> - ç”¨æˆ·åˆ—è¡¨ï¼ˆHTMLï¼‰</li>"
      let html_part10 = html_part9 + "<li><a href='/users/123'>GET /users/123</a> - ç”¨æˆ·è¯¦æƒ…ï¼ˆHTMLï¼‰</li>"
      let html_part11 = html_part10 + "<li><a href='/api/users'>GET /api/users</a> - ç”¨æˆ·åˆ—è¡¨ï¼ˆJSONï¼‰</li>"
      let html_part12 = html_part11 + "<li><a href='/api/users/123'>GET /api/users/123</a> - ç”¨æˆ·è¯¦æƒ…ï¼ˆJSONï¼‰</li>"
      let html = html_part12 + "</ul></body></html>"
      @Http.HttpResponse::ok(html)
    })
    
    // GET /login - ç™»å½•é¡µé¢ï¼ˆå‰ç«¯é¡µé¢å·²å†™å¥½ï¼Œè¿™é‡Œè¿”å›ç®€å•æç¤ºï¼‰
    .get("/login", fn(_request : @Http.HttpRequest) {
      // æ³¨æ„ï¼šå®é™…çš„å‰ç«¯ç™»å½•é¡µé¢åº”è¯¥ç”±å‰ç«¯æ¡†æ¶ï¼ˆNext.jsï¼‰æä¾›
      // è¿™é‡Œè¿”å›ä¸€ä¸ªç®€å•çš„æç¤ºé¡µé¢ï¼Œæˆ–è€…é‡å®šå‘åˆ°å‰ç«¯
      let html_part1 = "<!DOCTYPE html><html><head><title>ç™»å½•</title>"
      let html_part2 = html_part1 + "<meta charset='utf-8'></head><body>"
      let html_part3 = html_part2 + "<style>body{font-family:Arial,sans-serif;margin:40px;text-align:center;}" +
                       "h1{color:#333;}.info{padding:20px;background:#f5f5f5;border-radius:5px;margin:20px auto;max-width:600px;}</style>"
      let html_part4 = html_part3 + "<h1>ç™»å½•é¡µé¢</h1>"
      let html_part5 = html_part4 + "<div class='info'>"
      let html_part6 = html_part5 + "<p>å‰ç«¯ç™»å½•é¡µé¢åº”è¯¥ç”± Next.js æ¡†æ¶æä¾›</p>"
      let html_part7 = html_part6 + "<p>è¯·è®¿é—®å‰ç«¯åº”ç”¨ï¼š<a href='http://localhost:3000/login'>http://localhost:3000/login</a></p>"
      let html_part8 = html_part7 + "<p><strong>åç«¯ç™»å½•æ¥å£ï¼š</strong> POST /api/auth/login</p>"
      let html_part9 = html_part8 + "<p><strong>æµ‹è¯•è´¦å·ï¼š</strong></p>"
      let html_part10 = html_part9 + "<ul style='text-align:left;display:inline-block;'>"
      let html_part11 = html_part10 + "<li>ç”¨æˆ·å: admin, å¯†ç : 123456</li>"
      let html_part12 = html_part11 + "<li>ç”¨æˆ·å: user, å¯†ç : password</li>"
      let html_part13 = html_part12 + "</ul>"
      let html_part14 = html_part13 + "</div>"
      let html = html_part14 + "</body></html>"
      @Http.HttpResponse::ok(html)
    })
    
    // GET /favicon.ico - å¤„ç†æµè§ˆå™¨è‡ªåŠ¨è¯·æ±‚çš„å›¾æ ‡
    .get("/favicon.ico", fn(_request : @Http.HttpRequest) {
      // è¿”å› 204 No Contentï¼Œé¿å… 404 é”™è¯¯
      @Http.HttpResponse::no_content()
    })
  
  println("âœ“ åˆ›å»ºæ ¹è·¯å¾„ Controller: /")
  
  // 4.2 åˆ›å»ºç”¨æˆ· Controllerï¼ˆç±»ä¼¼ Spring çš„ @Controllerï¼‰
  let user_controller = @Controller.Controller::new("/users")
    // GET /usersï¼ˆç±»ä¼¼ @GetMapping("/")ï¼‰
    .get("/", fn(_request : @Http.HttpRequest) {
      let html_part1 = "<!DOCTYPE html><html><head><title>ç”¨æˆ·åˆ—è¡¨</title>"
      let html_part2 = html_part1 + "<meta charset='utf-8'></head><body>"
      let html_part3 = html_part2 + "<style>body{font-family:Arial,sans-serif;margin:40px;}h1{color:#333;}" +
                       "ul{list-style:none;padding:0;}li{padding:10px;background:#f5f5f5;margin:5px 0;border-radius:5px;}</style>"
      let html_part4 = html_part3 + "<h1>ç”¨æˆ·åˆ—è¡¨</h1>"
      let html_part5 = html_part4 + "<ul>"
      let html_part6 = html_part5 + "<li><strong>ç”¨æˆ· 1:</strong> Alice - alice@example.com</li>"
      let html_part7 = html_part6 + "<li><strong>ç”¨æˆ· 2:</strong> Bob - bob@example.com</li>"
      let html_part8 = html_part7 + "<li><strong>ç”¨æˆ· 3:</strong> Charlie - charlie@example.com</li>"
      let html_part9 = html_part8 + "</ul>"
      let html_part10 = html_part9 + "<p><a href='/'>è¿”å›é¦–é¡µ</a></p>"
      let html = html_part10 + "</body></html>"
      @Http.HttpResponse::ok(html)
    })
    
    // GET /users/{id}ï¼ˆç±»ä¼¼ @GetMapping("/{id}")ï¼‰
    .get("/{id}", fn(request : @Http.HttpRequest) {
      let path = request.get_path()
      let html_part1 = "<!DOCTYPE html><html><head><title>ç”¨æˆ·è¯¦æƒ…</title>"
      let html_part2 = html_part1 + "<meta charset='utf-8'></head><body>"
      let html_part3 = html_part2 + "<style>body{font-family:Arial,sans-serif;margin:40px;}h1{color:#333;}" +
                       ".info{padding:20px;background:#f5f5f5;border-radius:5px;margin:20px 0;}</style>"
      let html_part4 = html_part3 + "<h1>ç”¨æˆ·è¯¦æƒ…</h1>"
      let html_part5 = html_part4 + "<div class='info'>"
      let html_part6 = html_part5 + "<p><strong>è·¯å¾„:</strong> " + path + "</p>"
      let html_part7 = html_part6 + "<p><strong>ç”¨æˆ·ID:</strong> ä»è·¯å¾„ä¸­æå–</p>"
      let html_part8 = html_part7 + "<p><strong>çŠ¶æ€:</strong> å·²æ‰¾åˆ°</p>"
      let html_part9 = html_part8 + "</div>"
      let html_part10 = html_part9 + "<p><a href='/users'>è¿”å›ç”¨æˆ·åˆ—è¡¨</a> | <a href='/'>è¿”å›é¦–é¡µ</a></p>"
      let html = html_part10 + "</body></html>"
      @Http.HttpResponse::ok(html)
    })
    
    // POST /usersï¼ˆç±»ä¼¼ @PostMapping("/")ï¼‰
    .post("/", fn(_request : @Http.HttpRequest) {
      let html_part1 = "<!DOCTYPE html><html><head><title>åˆ›å»ºç”¨æˆ·</title>"
      let html_part2 = html_part1 + "<meta charset='utf-8'></head><body>"
      let html_part3 = html_part2 + "<style>body{font-family:Arial,sans-serif;margin:40px;}h1{color:#28a745;}</style>"
      let html_part4 = html_part3 + "<h1>âœ“ åˆ›å»ºç”¨æˆ·æˆåŠŸ</h1>"
      let html_part5 = html_part4 + "<p>ç”¨æˆ·å·²æˆåŠŸåˆ›å»º</p>"
      let html_part6 = html_part5 + "<p><a href='/users'>æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨</a> | <a href='/'>è¿”å›é¦–é¡µ</a></p>"
      let html = html_part6 + "</body></html>"
      @Http.HttpResponse::created(html)
    })
    
    // PUT /users/{id}ï¼ˆç±»ä¼¼ @PutMapping("/{id}")ï¼‰
    .put("/{id}", fn(_request : @Http.HttpRequest) {
      let html = "<!DOCTYPE html><html><head><title>æ›´æ–°ç”¨æˆ·</title><meta charset='utf-8'></head><body>" +
                 "<h1>âœ“ æ›´æ–°ç”¨æˆ·æˆåŠŸ</h1>" +
                 "<p><a href='/users'>è¿”å›ç”¨æˆ·åˆ—è¡¨</a></p>" +
                 "</body></html>"
      @Http.HttpResponse::ok(html)
    })
    
    // DELETE /users/{id}ï¼ˆç±»ä¼¼ @DeleteMapping("/{id}")ï¼‰
    .delete("/{id}", fn(_request : @Http.HttpRequest) {
      let html = "<!DOCTYPE html><html><head><title>åˆ é™¤ç”¨æˆ·</title><meta charset='utf-8'></head><body>" +
                 "<h1>âœ“ åˆ é™¤ç”¨æˆ·æˆåŠŸ</h1>" +
                 "<p><a href='/users'>è¿”å›ç”¨æˆ·åˆ—è¡¨</a></p>" +
                 "</body></html>"
      @Http.HttpResponse::ok(html)
    })
  
  println("âœ“ åˆ›å»º Controller: /users")
  
  // 4.3 åˆ›å»ºç™»å½•è®¤è¯ Controllerï¼ˆç±»ä¼¼ Spring çš„ @RestControllerï¼‰
  let auth_controller = @Controller.RestController::new("/api/auth")
    // GET /api/auth/loginï¼ˆè¿”å›æ¥å£è¯´æ˜ä¿¡æ¯ï¼‰
    .get("/login", fn(_request : @Http.HttpRequest) {
      let data = @hashmap.new()
      data.set("message", "æ­¤æ¥å£éœ€è¦ä½¿ç”¨ POST æ–¹æ³•æäº¤ç™»å½•ä¿¡æ¯")
      data.set("method", "POST")
      data.set("url", "/api/auth/login")
      data.set("content_type", "application/json")
      data.set("request_body", "{\"username\":\"admin\",\"password\":\"123456\"}")
      data.set("test_accounts", "ç”¨æˆ·å: admin/123456 æˆ– user/password")
      @Controller.JsonResponse::new(data)
    })
    // POST /api/auth/loginï¼ˆç±»ä¼¼ @PostMapping("/login")ï¼‰
    .post("/login", fn(request : @Http.HttpRequest) {
      handle_login(request)
    })
    
    // POST /api/auth/logoutï¼ˆç±»ä¼¼ @PostMapping("/logout")ï¼‰
    .post("/logout", fn(request : @Http.HttpRequest) {
      handle_logout(request)
    })
  
  println("âœ“ åˆ›å»ºè®¤è¯ Controller: /api/auth")
  
  // 4.4 åˆ›å»º REST API Controllerï¼ˆç±»ä¼¼ Spring çš„ @RestControllerï¼‰
  let api_controller = @Controller.RestController::new("/api/users")
    // GET /api/usersï¼ˆç±»ä¼¼ @GetMapping("/")ï¼‰
    .get("/", fn(_request : @Http.HttpRequest) {
      let data = @hashmap.new()
      data.set("id", "1")
      data.set("name", "Alice")
      data.set("email", "alice@example.com")
      @Controller.JsonResponse::new(data)
    })
    
    // GET /api/users/{id}ï¼ˆç±»ä¼¼ @GetMapping("/{id}")ï¼‰
    .get("/{id}", fn(request : @Http.HttpRequest) {
      let path = request.get_path()
      let data = @hashmap.new()
      // ä»è·¯å¾„ä¸­æå– IDï¼ˆç®€åŒ–å¤„ç†ï¼‰
      data.set("id", path)
      data.set("name", "Bob")
      data.set("email", "bob@example.com")
      @Controller.JsonResponse::new(data)
    })
    
    // POST /api/usersï¼ˆç±»ä¼¼ @PostMapping("/")ï¼‰
    .post("/", fn(_request : @Http.HttpRequest) {
      let data = @hashmap.new()
      data.set("id", "2")
      data.set("name", "Charlie")
      data.set("email", "charlie@example.com")
      @Controller.JsonResponse::new(data)
    })
    
    // PUT /api/users/{id}ï¼ˆç±»ä¼¼ @PutMapping("/{id}")ï¼‰
    .put("/{id}", fn(_request : @Http.HttpRequest) {
      let data = @hashmap.new()
      data.set("id", "1")
      data.set("name", "Alice Updated")
      data.set("email", "alice.updated@example.com")
      @Controller.JsonResponse::new(data)
    })
    
    // DELETE /api/users/{id}ï¼ˆç±»ä¼¼ @DeleteMapping("/{id}")ï¼‰
    .delete("/{id}", fn(_request : @Http.HttpRequest) {
      let data = @hashmap.new()
      data.set("status", "deleted")
      data.set("message", "ç”¨æˆ·å·²åˆ é™¤")
      @Controller.JsonResponse::new(data)
    })
  
  println("âœ“ åˆ›å»º RestController: /api/users")
  
  // 4.5 åˆ›å»º DispatcherServletï¼ˆç±»ä¼¼ Spring MVC çš„ DispatcherServletï¼‰
  let dispatcher = @Dispatcher.DispatcherServlet::new()
    .register_controller("rootController", root_controller)
    .register_controller("userController", user_controller)
    .register_rest_controller("authController", auth_controller)
    .register_rest_controller("apiController", api_controller)
  
  println("âœ“ åˆ›å»º DispatcherServlet")
  println("")
  
  // ========== ç¬¬äº”æ­¥ï¼šæµ‹è¯•è¯·æ±‚å¤„ç† ==========
  println("ğŸ§ª ç¬¬äº”æ­¥ï¼šæµ‹è¯•è¯·æ±‚å¤„ç†")
  println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
  
  // 5.1 æµ‹è¯• GET /
  let request0 = @Http.HttpRequest::new(
    @Http.HttpMethod::from_string("GET"),
    "/",
    @hashmap.new(),
    @hashmap.new(),
    None
  )
  let response0 = dispatcher.handle_request(request0)
  println("âœ“ GET /")
  println("  çŠ¶æ€ç : " + response0.get_status_code().to_string())
  match response0.get_body() {
    Some(body) => println("  å“åº”ä½“é•¿åº¦: " + body.length().to_string() + " å­—ç¬¦")
    None => println("  å“åº”ä½“: æ— ")
  }
  
  // 5.2 æµ‹è¯• GET /users
  let request1 = @Http.HttpRequest::new(
    @Http.HttpMethod::from_string("GET"),
    "/users",
    @hashmap.new(),
    @hashmap.new(),
    None
  )
  let response1 = dispatcher.handle_request(request1)
  println("âœ“ GET /users")
  println("  çŠ¶æ€ç : " + response1.get_status_code().to_string())
  match response1.get_body() {
    Some(body) => println("  å“åº”ä½“é•¿åº¦: " + body.length().to_string() + " å­—ç¬¦")
    None => println("  å“åº”ä½“: æ— ")
  }
  
  // 5.3 æµ‹è¯• GET /api/users
  let request2 = @Http.HttpRequest::new(
    @Http.HttpMethod::from_string("GET"),
    "/api/users",
    @hashmap.new(),
    @hashmap.new(),
    None
  )
  let response2 = dispatcher.handle_request(request2)
  println("âœ“ GET /api/users")
  println("  çŠ¶æ€ç : " + response2.get_status_code().to_string())
  match response2.get_body() {
    Some(body) => println("  å“åº”ä½“: " + body)
    None => println("  å“åº”ä½“: æ— ")
  }
  
  // 5.4 æµ‹è¯• GET /users/123
  let request3 = @Http.HttpRequest::new(
    @Http.HttpMethod::from_string("GET"),
    "/users/123",
    @hashmap.new(),
    @hashmap.new(),
    None
  )
  let response3 = dispatcher.handle_request(request3)
  println("âœ“ GET /users/123")
  println("  çŠ¶æ€ç : " + response3.get_status_code().to_string())
  
  // 5.5 æµ‹è¯• GET /api/users/123
  let request4 = @Http.HttpRequest::new(
    @Http.HttpMethod::from_string("GET"),
    "/api/users/123",
    @hashmap.new(),
    @hashmap.new(),
    None
  )
  let response4 = dispatcher.handle_request(request4)
  println("âœ“ GET /api/users/123")
  println("  çŠ¶æ€ç : " + response4.get_status_code().to_string())
  match response4.get_body() {
    Some(body) => println("  å“åº”ä½“: " + body)
    None => println("  å“åº”ä½“: æ— ")
  }
  
  // 5.6 æµ‹è¯• POST /api/auth/login
  let login_body = "{\"username\":\"admin\",\"password\":\"123456\"}"
  let login_headers = @hashmap.new()
  login_headers.set("Content-Type", "application/json")
  let request5 = @Http.HttpRequest::new(
    @Http.HttpMethod::from_string("POST"),
    "/api/auth/login",
    @hashmap.new(),
    login_headers,
    Some(login_body)
  )
  let response5 = dispatcher.handle_request(request5)
  println("âœ“ POST /api/auth/login")
  println("  çŠ¶æ€ç : " + response5.get_status_code().to_string())
  match response5.get_body() {
    Some(body) => println("  å“åº”ä½“: " + body)
    None => println("  å“åº”ä½“: æ— ")
  }
  
  // 5.7 æµ‹è¯• POST /api/auth/logout
  let logout_headers = @hashmap.new()
  logout_headers.set("Content-Type", "application/json")
  let request6 = @Http.HttpRequest::new(
    @Http.HttpMethod::from_string("POST"),
    "/api/auth/logout",
    @hashmap.new(),
    logout_headers,
    None
  )
  let response6 = dispatcher.handle_request(request6)
  println("âœ“ POST /api/auth/logout")
  println("  çŠ¶æ€ç : " + response6.get_status_code().to_string())
  match response6.get_body() {
    Some(body) => println("  å“åº”ä½“: " + body)
    None => println("  å“åº”ä½“: æ— ")
  }
  
  // 5.8 æµ‹è¯• 404
  let request7 = @Http.HttpRequest::new(
    @Http.HttpMethod::from_string("GET"),
    "/not-found",
    @hashmap.new(),
    @hashmap.new(),
    None
  )
  let response7 = dispatcher.handle_request(request7)
  println("âœ“ GET /not-found (404)")
  println("  çŠ¶æ€ç : " + response7.get_status_code().to_string())
  println("")
  
  // ========== ç¬¬å…­æ­¥ï¼šæŸ¥çœ‹å®¹å™¨çŠ¶æ€ ==========
  println("ğŸ“Š ç¬¬å…­æ­¥ï¼šæŸ¥çœ‹å®¹å™¨çŠ¶æ€")
  println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
  
  ctx.print_summary()
  println("")
  
  // ========== ç¬¬ä¸ƒæ­¥ï¼šä½¿ç”¨ Boot å¯åŠ¨åº”ç”¨ ==========
  println("ğŸš€ ç¬¬ä¸ƒæ­¥ï¼šä½¿ç”¨ Boot å¯åŠ¨åº”ç”¨")
  println("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
  
  println("âœ“ å‡†å¤‡å¯åŠ¨åµŒå…¥å¼æœåŠ¡å™¨...")
  println("  ç«¯å£: 8080")
  println("  è®¿é—®åœ°å€: http://localhost:8080")
  println("")
  println("ğŸ“Œ å¯ç”¨ç«¯ç‚¹ï¼š")
  println("  - GET  http://localhost:8080/              - é¦–é¡µ")
  println("  - GET  http://localhost:8080/users         - ç”¨æˆ·åˆ—è¡¨ï¼ˆHTMLï¼‰")
  println("  - GET  http://localhost:8080/users/{id}     - ç”¨æˆ·è¯¦æƒ…ï¼ˆHTMLï¼‰")
  println("  - POST http://localhost:8080/users          - åˆ›å»ºç”¨æˆ·ï¼ˆHTMLï¼‰")
  println("  - GET  http://localhost:8080/api/users      - ç”¨æˆ·åˆ—è¡¨ï¼ˆJSONï¼‰")
  println("  - GET  http://localhost:8080/api/users/{id} - ç”¨æˆ·è¯¦æƒ…ï¼ˆJSONï¼‰")
  println("  - POST http://localhost:8080/api/users      - åˆ›å»ºç”¨æˆ·ï¼ˆJSONï¼‰")
  println("  - POST http://localhost:8080/api/auth/login  - ç”¨æˆ·ç™»å½•ï¼ˆJSONï¼‰")
  println("  - POST http://localhost:8080/api/auth/logout - ç”¨æˆ·ç™»å‡ºï¼ˆJSONï¼‰")
  println("")
  println("ğŸ“Œ æµ‹è¯•è´¦å·ï¼š")
  println("  - ç”¨æˆ·å: admin, å¯†ç : 123456")
  println("  - ç”¨æˆ·å: user, å¯†ç : password")
  println("")
  
  // ä½¿ç”¨ BootApplication å¯åŠ¨åº”ç”¨ï¼ˆç±»ä¼¼ Spring Boot çš„ @SpringBootApplicationï¼‰
  // BootApplication::run() ä¼šé˜»å¡ï¼Œç›´åˆ°æœåŠ¡å™¨åœæ­¢
  @Boot.BootApplication::run(8080, fn() {
    dispatcher
  })
  
  // æœåŠ¡å™¨åœæ­¢åæ‰ä¼šæ‰§è¡Œåˆ°è¿™é‡Œ
  println("")
  println("============================================================")
  println("âœ¨ æœåŠ¡å™¨å·²åœæ­¢ï¼Œç¤ºä¾‹åº”ç”¨å®Œæˆï¼")
  println("============================================================")
}
