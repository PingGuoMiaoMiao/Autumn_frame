# Autumn Frame ä½¿ç”¨æŒ‡å—

> ä¸€ä¸ªç±»ä¼¼ Spring Boot çš„ MoonBit Web æ¡†æ¶ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [IoC å®¹å™¨](#ioc-å®¹å™¨)
- [Web MVC](#web-mvc)
- [å¯åŠ¨åº”ç”¨](#å¯åŠ¨åº”ç”¨)
- [é…ç½®ç®¡ç†](#é…ç½®ç®¡ç†)
- [å®Œæ•´ç¤ºä¾‹](#å®Œæ•´ç¤ºä¾‹)
- [ä¸ Spring Boot å¯¹æ¯”](#ä¸-spring-boot-å¯¹æ¯”)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºé¡¹ç›®

```bash
# åˆ›å»ºæ–°çš„ MoonBit é¡¹ç›®
moon init my-app
cd my-app
```

### 2. æ·»åŠ ä¾èµ–

åœ¨ `moon.mod.json` ä¸­æ·»åŠ ä¾èµ–ï¼š

```json
{
  "dependencies": {
    "username/Autumn_frame/autumn-frame/Autumn-Boot": "*",
    "username/Autumn_frame/autumn-frame/Autumn-WebMVC": "*",
    "username/Autumn_frame/autumn-frame/Autumn-Ioc": "*"
  }
}
```

### 3. åˆ›å»ºä¸»åº”ç”¨

```moonbit
// main.mbt
fn main {
  // 1. åˆ›å»ºé…ç½®
  let config = [
    ("server.port", "8080"),
    ("app.name", "My App")
  ]
  
  // 2. åˆ›å»º IoC å®¹å™¨
  let ctx = @ApplicationContext.ApplicationContext::new(config, "com.example")
  
  // 3. æ³¨å†Œ Bean
  ctx.register_bean("userService", "com.example.service.UserService", 10, false)
  
  // 4. åˆ›å»º Controller
  let user_controller = @Controller.Controller::new("/users")
    .get("/", fn(request) {
      @Http.HttpResponse::ok("<h1>ç”¨æˆ·åˆ—è¡¨</h1>")
    })
  
  // 5. åˆ›å»º DispatcherServlet
  let dispatcher = @Dispatcher.DispatcherServlet::new()
    .register_controller("userController", user_controller)
  
  // 6. å¯åŠ¨åº”ç”¨
  @Boot.BootApplication::run(8080, fn() { dispatcher })
}
```

### 4. è¿è¡Œåº”ç”¨

```bash
moon run --target native
```

è®¿é—® `http://localhost:8080/users` å³å¯çœ‹åˆ°å“åº”ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

### æ¨èçš„é¡¹ç›®ç»“æ„

```
my-app/
â”œâ”€â”€ moon.mod.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ main.mbt               # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controller/        # æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ UserController.mbt
â”‚   â”œâ”€â”€ service/           # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ UserService.mbt
â”‚   â””â”€â”€ model/             # æ•°æ®æ¨¡å‹
â”‚       â””â”€â”€ User.mbt
â””â”€â”€ resources/             # èµ„æºæ–‡ä»¶
    â””â”€â”€ application.properties
```

### MoonBit åŒ…ç»“æ„

åœ¨ MoonBit ä¸­ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªåŒ…ï¼ˆpackageï¼‰ï¼Œéœ€è¦åˆ›å»º `moon.pkg.json`ï¼š

```json
// src/controller/moon.pkg.json
{
  "is-main": false,
  "import": [
    {
      "path": "username/Autumn_frame/autumn-frame/Autumn-WebMVC/Controller"
    }
  ],
  "source": [
    "UserController.mbt"
  ]
}
```

---

## ğŸ—ï¸ IoC å®¹å™¨

### ç±»ä¼¼ Spring çš„ ApplicationContext

Autumn Frame æä¾›äº†ç±»ä¼¼ Spring çš„ IoC å®¹å™¨ï¼š

```moonbit
// 1. åˆ›å»ºé…ç½®
let config = [
  ("app.name", "My App"),
  ("db.url", "jdbc:mysql://localhost:3306/test"),
  ("db.username", "root"),
  ("db.password", "password")
]

// 2. åˆ›å»º IoC å®¹å™¨ï¼ˆç±»ä¼¼ Spring çš„ ApplicationContextï¼‰
let ctx = @ApplicationContext.ApplicationContext::new(
  config,
  "com.example"  // åŸºç¡€åŒ…å
)
```

### æ³¨å†Œ Beanï¼ˆç±»ä¼¼ @Componentï¼‰

```moonbit
// æ³¨å†Œ Beanï¼ˆç±»ä¼¼ Spring çš„ @Componentï¼‰
ctx.register_bean(
  "userService",                           // Bean åç§°
  "com.example.service.UserService",       // Bean ç±»å‹
  10,                                      // é¡ºåºï¼ˆç±»ä¼¼ @Orderï¼‰
  false                                    // æ˜¯å¦ä¸ºä¸» Beanï¼ˆç±»ä¼¼ @Primaryï¼‰
)

ctx.register_bean(
  "userController",
  "com.example.controller.UserController",
  20,
  false
)
```

### åˆ›å»º Bean å®ä¾‹

```moonbit
// åˆ›å»ºæ‰€æœ‰ Bean å®ä¾‹ï¼ˆç±»ä¼¼ Spring çš„ Bean åˆå§‹åŒ–ï¼‰
ctx.create_all_beans()
```

### è·å–é…ç½®ï¼ˆç±»ä¼¼ @Valueï¼‰

```moonbit
// è·å–é…ç½®å€¼ï¼ˆç±»ä¼¼ Spring çš„ @Valueï¼‰
let app_name = ctx.get_property("app.name")  // Some("My App")
let db_url = ctx.get_property("db.url")      // Some("jdbc:mysql://...")
```

### å®Œæ•´çš„ IoC ç¤ºä¾‹

```moonbit
fn main {
  // 1. åˆ›å»ºé…ç½®
  let config = [
    ("app.name", "User Management System"),
    ("server.port", "8080"),
    ("db.url", "jdbc:mysql://localhost:3306/users"),
    ("db.username", "root"),
    ("db.password", "password")
  ]
  
  // 2. åˆ›å»º IoC å®¹å™¨
  let ctx = @ApplicationContext.ApplicationContext::new(config, "com.example")
  
  // 3. æ³¨å†Œ Bean
  ctx.register_bean("userService", "com.example.service.UserService", 10, false)
  ctx.register_bean("userRepository", "com.example.repository.UserRepository", 5, false)
  ctx.register_bean("userController", "com.example.controller.UserController", 20, false)
  
  // 4. åˆ›å»ºæ‰€æœ‰ Bean
  ctx.create_all_beans()
  
  // 5. æŸ¥çœ‹å®¹å™¨çŠ¶æ€
  ctx.print_summary()
}
```

---

## ğŸŒ Web MVC

### Controllerï¼ˆç±»ä¼¼ @Controllerï¼‰

Controller ç”¨äºå¤„ç†è¿”å› HTML é¡µé¢çš„è¯·æ±‚ï¼š

```moonbit
// åˆ›å»º Controllerï¼ˆç±»ä¼¼ Spring çš„ @Controllerï¼‰
let user_controller = @Controller.Controller::new("/users")
  // GET /usersï¼ˆç±»ä¼¼ @GetMapping("/")ï¼‰
  .get("/", fn(request : @Http.HttpRequest) {
    let html = "<html><head><title>ç”¨æˆ·åˆ—è¡¨</title></head><body>" +
               "<h1>ç”¨æˆ·åˆ—è¡¨</h1>" +
               "<ul>" +
               "<li>ç”¨æˆ· 1: Alice</li>" +
               "<li>ç”¨æˆ· 2: Bob</li>" +
               "</ul>" +
               "</body></html>"
    @Http.HttpResponse::ok(html)
  })
  
  // GET /users/{id}ï¼ˆç±»ä¼¼ @GetMapping("/{id}")ï¼‰
  .get("/{id}", fn(request : @Http.HttpRequest) {
    let path = request.get_path()
    let html = "<html><head><title>ç”¨æˆ·è¯¦æƒ…</title></head><body>" +
               "<h1>ç”¨æˆ·è¯¦æƒ…</h1>" +
               "<p>è·¯å¾„: " + path + "</p>" +
               "</body></html>"
    @Http.HttpResponse::ok(html)
  })
  
  // POST /usersï¼ˆç±»ä¼¼ @PostMapping("/")ï¼‰
  .post("/", fn(request : @Http.HttpRequest) {
    let html = "<html><head><title>åˆ›å»ºç”¨æˆ·</title></head><body>" +
               "<h1>åˆ›å»ºç”¨æˆ·æˆåŠŸ</h1>" +
               "</body></html>"
    @Http.HttpResponse::created(html)
  })
  
  // PUT /users/{id}ï¼ˆç±»ä¼¼ @PutMapping("/{id}")ï¼‰
  .put("/{id}", fn(request : @Http.HttpRequest) {
    @Http.HttpResponse::ok("<h1>æ›´æ–°ç”¨æˆ·æˆåŠŸ</h1>")
  })
  
  // DELETE /users/{id}ï¼ˆç±»ä¼¼ @DeleteMapping("/{id}")ï¼‰
  .delete("/{id}", fn(request : @Http.HttpRequest) {
    @Http.HttpResponse::ok("<h1>åˆ é™¤ç”¨æˆ·æˆåŠŸ</h1>")
  })
```

### RestControllerï¼ˆç±»ä¼¼ @RestControllerï¼‰

RestController ç”¨äºå¤„ç†è¿”å› JSON çš„ REST APIï¼š

```moonbit
// åˆ›å»º RestControllerï¼ˆç±»ä¼¼ Spring çš„ @RestControllerï¼‰
let api_controller = @Controller.RestController::new("/api/users")
  // GET /api/usersï¼ˆç±»ä¼¼ @GetMapping("/")ï¼‰
  .get("/", fn(request : @Http.HttpRequest) {
    let data = @hashmap.new()
    data.set("id", "1")
    data.set("name", "Alice")
    data.set("email", "alice@example.com")
    @Controller.JsonResponse::new(data)
  })
  
  // GET /api/users/{id}ï¼ˆç±»ä¼¼ @GetMapping("/{id}")ï¼‰
  .get("/{id}", fn(request : @Http.HttpRequest) {
    let path = request.get_path()
    let data = @hashmap.new()
    data.set("id", path)
    data.set("name", "Bob")
    data.set("email", "bob@example.com")
    @Controller.JsonResponse::new(data)
  })
  
  // POST /api/usersï¼ˆç±»ä¼¼ @PostMapping("/")ï¼‰
  .post("/", fn(request : @Http.HttpRequest) {
    let data = @hashmap.new()
    data.set("id", "2")
    data.set("name", "Charlie")
    data.set("email", "charlie@example.com")
    @Controller.JsonResponse::new(data)
  })
```

### DispatcherServletï¼ˆç±»ä¼¼ Spring MVC çš„ DispatcherServletï¼‰

DispatcherServlet è´Ÿè´£è¯·æ±‚åˆ†å‘ï¼š

```moonbit
// åˆ›å»º DispatcherServletï¼ˆç±»ä¼¼ Spring MVC çš„ DispatcherServletï¼‰
let dispatcher = @Dispatcher.DispatcherServlet::new()
  .register_controller("userController", user_controller)
  .register_rest_controller("apiController", api_controller)
```

### è¯·æ±‚å’Œå“åº”

#### HttpRequestï¼ˆç±»ä¼¼ Spring çš„ HttpRequestï¼‰

```moonbit
// è·å–è¯·æ±‚ä¿¡æ¯
let method = request.get_method()        // HTTP æ–¹æ³•ï¼ˆGET, POST ç­‰ï¼‰
let path = request.get_path()            // è¯·æ±‚è·¯å¾„ï¼ˆå¦‚ /users/123ï¼‰
let query_params = request.get_query_params()  // æŸ¥è¯¢å‚æ•°ï¼ˆHashMapï¼‰
let headers = request.get_headers()      // è¯·æ±‚å¤´ï¼ˆHashMapï¼‰
let body = request.get_body()            // è¯·æ±‚ä½“ï¼ˆString?ï¼‰
```

#### HttpResponseï¼ˆç±»ä¼¼ Spring çš„ ResponseEntityï¼‰

```moonbit
// åˆ›å»ºå“åº”
let response = @Http.HttpResponse::ok("<h1>æˆåŠŸ</h1>")           // 200 OK
let created = @Http.HttpResponse::created("<h1>å·²åˆ›å»º</h1>")     // 201 Created
let not_found = @Http.HttpResponse::not_found("<h1>æœªæ‰¾åˆ°</h1>") // 404 Not Found
let error = @Http.HttpResponse::error("<h1>æœåŠ¡å™¨é”™è¯¯</h1>")     // 500 Internal Server Error

// JSON å“åº”
let json_response = @Http.HttpResponse::json("{\"id\":\"1\",\"name\":\"Alice\"}")
```

---

## ğŸš€ å¯åŠ¨åº”ç”¨

### BootApplicationï¼ˆç±»ä¼¼ @SpringBootApplicationï¼‰

ä½¿ç”¨ `BootApplication` å¯åŠ¨åº”ç”¨ï¼Œç±»ä¼¼äº Spring Bootï¼š

```moonbit
// å¯åŠ¨åº”ç”¨ï¼ˆç±»ä¼¼ Spring Boot çš„ @SpringBootApplicationï¼‰
@Boot.BootApplication::run(8080, fn() {
  // é…ç½® DispatcherServlet
  let dispatcher = @Dispatcher.DispatcherServlet::new()
    .register_controller("userController", user_controller)
    .register_rest_controller("apiController", api_controller)
  
  dispatcher
})
```

### å®Œæ•´çš„å¯åŠ¨ç¤ºä¾‹

```moonbit
fn main {
  // 1. åˆ›å»º IoC å®¹å™¨
  let config = [
    ("server.port", "8080"),
    ("app.name", "My App")
  ]
  let ctx = @ApplicationContext.ApplicationContext::new(config, "com.example")
  
  // 2. æ³¨å†Œ Bean
  ctx.register_bean("userService", "com.example.service.UserService", 10, false)
  ctx.create_all_beans()
  
  // 3. åˆ›å»º Controller
  let user_controller = @Controller.Controller::new("/users")
    .get("/", fn(request) {
      @Http.HttpResponse::ok("<h1>ç”¨æˆ·åˆ—è¡¨</h1>")
    })
  
  // 4. åˆ›å»º DispatcherServlet
  let dispatcher = @Dispatcher.DispatcherServlet::new()
    .register_controller("userController", user_controller)
  
  // 5. å¯åŠ¨åº”ç”¨
  @Boot.BootApplication::run(8080, fn() { dispatcher })
}
```

---

## âš™ï¸ é…ç½®ç®¡ç†

### é…ç½®å±æ€§ï¼ˆç±»ä¼¼ application.propertiesï¼‰

```moonbit
// åˆ›å»ºé…ç½®ï¼ˆç±»ä¼¼ Spring Boot çš„ application.propertiesï¼‰
let config = [
  ("app.name", "My Application"),
  ("app.version", "1.0.0"),
  ("server.port", "8080"),
  ("db.url", "jdbc:mysql://localhost:3306/test"),
  ("db.username", "root"),
  ("db.password", "password")
]
```

### è·å–é…ç½®å€¼

```moonbit
// ä» ApplicationContext è·å–é…ç½®
let app_name = ctx.get_property("app.name")           // Some("My Application")
let server_port = ctx.get_property_int("server.port") // Some(8080)
let db_enabled = ctx.get_property_bool("db.enabled") // Some(true) æˆ– None
```

### é…ç½®è¡¨è¾¾å¼ï¼ˆç±»ä¼¼ ${...}ï¼‰

Autumn Frame æ”¯æŒé…ç½®è¡¨è¾¾å¼è§£æï¼š

```moonbit
let config = [
  ("app.name", "My App"),
  ("app.url", "http://localhost:8080"),
  ("app.fullUrl", "${app.url}/api")  // æ”¯æŒ ${...} è¡¨è¾¾å¼
]
```

---

## ğŸ“ å®Œæ•´ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šç®€å•çš„ç”¨æˆ·ç®¡ç†åº”ç”¨

```moonbit
/// main.mbt
fn main {
  println("============================================================")
  println("Autumn Framework ç¤ºä¾‹åº”ç”¨")
  println("============================================================")
  println("")
  
  // ========== ç¬¬ä¸€æ­¥ï¼šåˆ›å»º IoC å®¹å™¨ ==========
  let config = [
    ("app.name", "User Management System"),
    ("app.version", "1.0.0"),
    ("server.port", "8080"),
    ("db.url", "jdbc:mysql://localhost:3306/users"),
    ("db.username", "root"),
    ("db.password", "password")
  ]
  
  let ctx = @ApplicationContext.ApplicationContext::new(config, "com.example")
  println("âœ“ IoC å®¹å™¨åˆ›å»ºæˆåŠŸ")
  
  // ========== ç¬¬äºŒæ­¥ï¼šæ³¨å†Œ Bean ==========
  ctx.register_bean("userService", "com.example.service.UserService", 10, false)
  ctx.register_bean("userController", "com.example.controller.UserController", 20, false)
  println("âœ“ Bean æ³¨å†Œå®Œæˆ")
  
  // ========== ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º Bean å®ä¾‹ ==========
  ctx.create_all_beans()
  println("âœ“ Bean å®ä¾‹åˆ›å»ºå®Œæˆ")
  
  // ========== ç¬¬å››æ­¥ï¼šåˆ›å»º Web MVC åº”ç”¨ ==========
  
  // 4.1 åˆ›å»ºæ ¹è·¯å¾„ Controller
  let root_controller = @Controller.Controller::new("")
    .get("/", fn(_request) {
      let html = "<!DOCTYPE html><html><head><title>Autumn Framework</title></head><body>" +
                 "<h1>æ¬¢è¿ä½¿ç”¨ Autumn Framework</h1>" +
                 "<p>è®¿é—® <a href='/users'>/users</a> æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨</p>" +
                 "<p>è®¿é—® <a href='/api/users'>/api/users</a> æŸ¥çœ‹ API</p>" +
                 "</body></html>"
      @Http.HttpResponse::ok(html)
    })
  
  // 4.2 åˆ›å»ºç”¨æˆ· Controller
  let user_controller = @Controller.Controller::new("/users")
    .get("/", fn(_request) {
      let html = "<html><head><title>ç”¨æˆ·åˆ—è¡¨</title></head><body>" +
                 "<h1>ç”¨æˆ·åˆ—è¡¨</h1>" +
                 "<ul>" +
                 "<li>ç”¨æˆ· 1: Alice</li>" +
                 "<li>ç”¨æˆ· 2: Bob</li>" +
                 "<li>ç”¨æˆ· 3: Charlie</li>" +
                 "</ul>" +
                 "</body></html>"
      @Http.HttpResponse::ok(html)
    })
    .get("/{id}", fn(request) {
      let path = request.get_path()
      let html = "<html><head><title>ç”¨æˆ·è¯¦æƒ…</title></head><body>" +
                 "<h1>ç”¨æˆ·è¯¦æƒ…</h1>" +
                 "<p>è·¯å¾„: " + path + "</p>" +
                 "</body></html>"
      @Http.HttpResponse::ok(html)
    })
  
  // 4.3 åˆ›å»º REST API Controller
  let api_controller = @Controller.RestController::new("/api/users")
    .get("/", fn(_request) {
      let data = @hashmap.new()
      data.set("id", "1")
      data.set("name", "Alice")
      data.set("email", "alice@example.com")
      @Controller.JsonResponse::new(data)
    })
    .get("/{id}", fn(request) {
      let path = request.get_path()
      let data = @hashmap.new()
      data.set("id", path)
      data.set("name", "Bob")
      data.set("email", "bob@example.com")
      @Controller.JsonResponse::new(data)
    })
  
  // 4.4 åˆ›å»º DispatcherServlet
  let dispatcher = @Dispatcher.DispatcherServlet::new()
    .register_controller("rootController", root_controller)
    .register_controller("userController", user_controller)
    .register_rest_controller("apiController", api_controller)
  
  println("âœ“ Web MVC é…ç½®å®Œæˆ")
  println("")
  
  // ========== ç¬¬äº”æ­¥ï¼šå¯åŠ¨åº”ç”¨ ==========
  println("ğŸš€ å¯åŠ¨åº”ç”¨...")
  println("  ç«¯å£: 8080")
  println("  è®¿é—®åœ°å€: http://localhost:8080")
  println("")
  
  @Boot.BootApplication::run(8080, fn() { dispatcher })
}
```

### è¿è¡Œç¤ºä¾‹

```bash
# ç¼–è¯‘å¹¶è¿è¡Œ
moon run --target native

# è®¿é—®ä»¥ä¸‹åœ°å€ï¼š
# http://localhost:8080/          - é¦–é¡µ
# http://localhost:8080/users     - ç”¨æˆ·åˆ—è¡¨ï¼ˆHTMLï¼‰
# http://localhost:8080/api/users - ç”¨æˆ·åˆ—è¡¨ï¼ˆJSONï¼‰
```

---

## ğŸ”„ ä¸ Spring Boot å¯¹æ¯”

### åŠŸèƒ½å¯¹æ¯”è¡¨

| åŠŸèƒ½ | Spring Boot | Autumn Frame |
|------|------------|--------------|
| **IoC å®¹å™¨** | `@SpringBootApplication` | `ApplicationContext::new()` |
| **Bean æ³¨å†Œ** | `@Component`, `@Service`, `@Repository` | `ctx.register_bean()` |
| **é…ç½®ç®¡ç†** | `application.properties`, `@Value` | `config` æ•°ç»„, `ctx.get_property()` |
| **Web Controller** | `@Controller`, `@GetMapping` | `Controller::new()`, `.get()` |
| **REST API** | `@RestController`, `@GetMapping` | `RestController::new()`, `.get()` |
| **è¯·æ±‚åˆ†å‘** | `DispatcherServlet`ï¼ˆè‡ªåŠ¨ï¼‰ | `DispatcherServlet::new()` |
| **å¯åŠ¨ç±»** | `@SpringBootApplication` + `main()` | `BootApplication::run()` |
| **æœåŠ¡å™¨ç«¯å£** | `server.port` | `BootApplication::run(port, ...)` |

### ä»£ç å¯¹æ¯”

#### Spring Boot æ–¹å¼

```java
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}

@RestController
@RequestMapping("/api/users")
public class UserController {
    @GetMapping("/")
    public User getUser() {
        return new User("1", "Alice");
    }
}
```

#### Autumn Frame æ–¹å¼

```moonbit
fn main {
  let ctx = @ApplicationContext.ApplicationContext::new(config, "com.example")
  
  let api_controller = @Controller.RestController::new("/api/users")
    .get("/", fn(_request) {
      let data = @hashmap.new()
      data.set("id", "1")
      data.set("name", "Alice")
      @Controller.JsonResponse::new(data)
    })
  
  let dispatcher = @Dispatcher.DispatcherServlet::new()
    .register_rest_controller("apiController", api_controller)
  
  @Boot.BootApplication::run(8080, fn() { dispatcher })
}
```

---

## ğŸ“š æœ€ä½³å®è·µ

### 1. é¡¹ç›®ç»“æ„

```
my-app/
â”œâ”€â”€ moon.mod.json
â”œâ”€â”€ main.mbt                    # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controller/            # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ UserController.mbt
â”‚   â”‚   â””â”€â”€ moon.pkg.json
â”‚   â”œâ”€â”€ service/               # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ UserService.mbt
â”‚   â”‚   â””â”€â”€ moon.pkg.json
â”‚   â””â”€â”€ model/                 # æ•°æ®æ¨¡å‹
â”‚       â”œâ”€â”€ User.mbt
â”‚       â””â”€â”€ moon.pkg.json
â””â”€â”€ resources/                 # èµ„æºæ–‡ä»¶
    â””â”€â”€ application.properties
```

### 2. é…ç½®ç®¡ç†

- å°†é…ç½®é›†ä¸­ç®¡ç†åœ¨ `main.mbt` ä¸­
- ä½¿ç”¨æœ‰æ„ä¹‰çš„é…ç½®é”®åï¼ˆå¦‚ `app.name`, `db.url`ï¼‰
- æ”¯æŒé…ç½®è¡¨è¾¾å¼ `${...}`

### 3. Controller ç»„ç»‡

- æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ Controller
- ä½¿ç”¨æœ‰æ„ä¹‰çš„è·¯å¾„å‰ç¼€ï¼ˆå¦‚ `/users`, `/api/users`ï¼‰
- ä¿æŒå¤„ç†å‡½æ•°ç®€æ´ï¼Œå¤æ‚é€»è¾‘æ”¾åœ¨ Service å±‚

### 4. é”™è¯¯å¤„ç†

```moonbit
// åœ¨ Controller ä¸­å¤„ç†é”™è¯¯
.get("/{id}", fn(request) {
  match process_request(request) {
    Ok(result) => @Http.HttpResponse::ok(result)
    Err(error) => @Http.HttpResponse::error(error)
  }
})
```

---

## ğŸ¯ æ€»ç»“

Autumn Frame æä¾›äº†ç±»ä¼¼ Spring Boot çš„å¼€å‘ä½“éªŒï¼š

1. **IoC å®¹å™¨** - ä½¿ç”¨ `ApplicationContext` ç®¡ç† Bean
2. **Web MVC** - ä½¿ç”¨ `Controller` å’Œ `RestController` å¤„ç†è¯·æ±‚
3. **è¯·æ±‚åˆ†å‘** - ä½¿ç”¨ `DispatcherServlet` åˆ†å‘è¯·æ±‚
4. **å¯åŠ¨åº”ç”¨** - ä½¿ç”¨ `BootApplication` å¯åŠ¨åº”ç”¨
5. **é…ç½®ç®¡ç†** - ä½¿ç”¨é…ç½®æ•°ç»„å’Œ `get_property()` è·å–é…ç½®

è™½ç„¶ MoonBit æ²¡æœ‰æ³¨è§£ç³»ç»Ÿï¼Œä½†é€šè¿‡å‡½æ•°å¼ API æä¾›äº†ç±»ä¼¼çš„åŠŸèƒ½å’Œå¼€å‘ä½“éªŒã€‚

---

## ğŸ“– æ›´å¤šèµ„æº

- [Summer Demo ç¤ºä¾‹](../summer-demo/README.md)
- [Autumn Frame é¡¹ç›®ç»“æ„](../autumn-frame/)
- [MoonBit å®˜æ–¹æ–‡æ¡£](https://docs.moonbitlang.cn/)

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

